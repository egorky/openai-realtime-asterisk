# Environment variable configuration for the ARI Speech-to-Text Application

# --- Logging Configuration ---
# Log level (e.g., error, warn, info, verbose, debug, silly)
# LOG_LEVEL=info

# --- Asterisk ARI Connection ---
# ASTERISK_ARI_URL=http://localhost:8088
# ASTERISK_ARI_USERNAME=asterisk
# ASTERISK_ARI_PASSWORD=asterisk
# ASTERISK_ARI_APP_NAME=speech-to-text-app

# --- RTP Server Configuration ---
# The IP address that Asterisk should use to send RTP to this application.
# Often the local IP address of the machine running this application.
# RTP_HOST_IP=127.0.0.1

# --- Audio Prompts ---
# Paths for audio prompts. These are relative to Asterisk's sounds directory
# or absolute paths if your Asterisk sound/moh configuration allows.
# Do not include file extensions like .wav or .sln.
# AUDIO_GREETING_PATH=custom/greeting

# Path for the audio prompt played while waiting for various stages,
# including after a fallback batch transcription attempt if applicable.
# Examples: custom/please_wait, sound:tt-monkeys
# Leave empty or comment out to use the default from config/default.json or ultimately play no waiting audio if not defined there.
# AUDIO_WAITING_PATH=custom/please_wait

# --- Audio Capture for Fallback/Debugging ---
# Enable or disable audio capture. Required for fallback batch transcription.
# AUDIO_CAPTURE_ENABLED=false
# Directory to store captured audio files.
# AUDIO_CAPTURE_PATH=./recordings

# --- Google Cloud Speech-to-Text ---
# Path to your Google Cloud service account key JSON file.
# GOOGLE_APPLICATION_CREDENTIALS=./config/google-credentials.json

# Default language code for speech recognition if not set on the channel.
# Example: en-US, es-US, fr-FR
# DEFAULT_LANGUAGE_CODE=en-US

#------------------------------------------------------------------------------------
# Voice Activity Detection (VAD) and Recognition Activation
#------------------------------------------------------------------------------------
# RECOGNITION_ACTIVATION_MODE: How recognition starts.
#   "fixedDelay": Starts after 'BARGE_IN_DELAY_SECONDS' post-prompt.
#   "immediate": Starts immediately after prompt.
#   "vad": Uses Voice Activity Detection.
# RECOGNITION_ACTIVATION_MODE="fixedDelay"

# VAD Specific - Only used if RECOGNITION_ACTIVATION_MODE="vad"
APP_APPRECOGNITION_VADSILENCETHRESHOLDMS=2500
APP_APPRECOGNITION_VADTALKTHRESHOLD=256
APP_APPRECOGNITION_VADRECOGACTIVATION="vadMode" # "vadMode" or "afterPrompt"
APP_APPRECOGNITION_VADMAXWAITAFTERPROMPTSECONDS=10.0

# --- Application Recognition Behavior (Non-VAD specific) ---
# bargeInDelaySeconds: Delay in seconds before starting recognition in 'fixedDelay' mode.
# Allows playing a prompt before listening. Set to 0 for no delay if mode is fixedDelay.
# BARGE_IN_DELAY_SECONDS=0.5

# noSpeechBeginTimeoutSeconds: Max time in seconds to wait for speech to begin after recognition starts.
# If no speech detected by Google (SPEECH_ACTIVITY_BEGIN) in this time, the call may be ended or fallback attempted.
# NO_SPEECH_BEGIN_TIMEOUT_SECONDS=5.0

# initialGoogleStreamIdleTimeoutSeconds: Max time in seconds Google stream can be idle at the very beginning
# before any speech has been detected. Helps catch issues where media isn't flowing.
# INITIAL_GOOGLE_STREAM_IDLE_TIMEOUT_SECONDS=10.0

# speechEndSilenceTimeoutSeconds: Silence duration in seconds after the last word to consider speech ended.
# This is an application-level VAD that complements Google's internal VAD.
# SPEECH_END_SILENCE_TIMEOUT_SECONDS=1.5

# maxRecognitionDurationSeconds: Maximum total duration in seconds for the entire recognition process for a call.
# MAX_RECOGNITION_DURATION_SECONDS=30.0

# enableFallbackBatchTranscription: If true, and audio capture is enabled, the application will attempt
# a batch transcription of the captured audio if the streaming recognition fails under certain conditions.
# ENABLE_FALLBACK_BATCH_TRANSCRIPTION=false
